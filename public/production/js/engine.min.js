/*! Node Jukebox - v0.1.0 - 2012-09-12
* http://nico.io/
* Copyright (c) 2012 Nico Valencia; Licensed MIT */
(function(e,t){var n={};n.BB={},n.views={},n.init=function(){n.artists=new n.BB.Artists;var e=n.artists.fetch();n.views.home_index=new n.BB.HomeIndex({artists_def:e})},e.app=n,t(document).ready(n.init)})(this,jQuery),function(e,t){var n=Backbone.Model.extend({initialize:function(e){this.songs=new app.BB.Songs,e.children&&this.createSongs(e.children)},createSongs:function(e){var t=this;_.each(e,function(e,n){if(e.type!=="file")return!1;t.songs.add(e)})}});e.app.BB.Album=n}(this,jQuery),function(e,t){var n=Backbone.Model.extend({initialize:function(e){this.albums=new app.BB.Albums,e.children&&this.createAlbums(e.children)},createAlbums:function(e){var t=this;_.each(e,function(e,n){if(e.type!=="folder")return!1;t.albums.add(e)})}});e.app.BB.Artist=n}(this,jQuery),function(e,t){var n=Backbone.Model.extend({initialize:function(e){}});e.app.BB.Song=n}(this,jQuery),function(e,t){var n=Backbone.Collection.extend({model:app.BB.Album});e.app.BB.Albums=n}(this,jQuery),function(e,t){var n=Backbone.Collection.extend({url:"/songs",model:app.BB.Artist,initialize:function(e){_.each(e,function(e,t){var n=new app.BB.Artist(null,e);app.artists.add(n)})},parse:function(e){var t=[];return _.each(e.children,function(e,n){if(e.type!=="folder")return!1;t.push(e)}),t}});e.app.BB.Artists=n}(this,jQuery),function(e,t){var n=Backbone.Collection.extend({model:app.BB.Song});e.app.BB.Songs=n}(this,jQuery),function(e,t){var n=Backbone.View.extend({el:"body",initialize:function(e){var n=this;t.when(e.artists_def).then(function(){n.render()})},render:function(){this.$el.find(".loader").fadeOut(function(){(new app.BB.ArtistsIndex({collection:app.artists})).render()})}});e.app.BB.HomeIndex=n}(this,jQuery),function(e,t){var n=Backbone.View.extend({tagName:"ul",initialize:function(e){app.views.artists_index=this},render:function(){var e=this,n=t("#template-artists-item").html(),r=Handlebars.compile(n);_.each(this.collection.models,function(t){var n=r(t.attributes);e.$el.append(n)}),this.$el.hide(),this.$el.appendTo(app.views.home_index.$el),this.$el.fadeIn()}});e.app.BB.ArtistsIndex=n}(this,jQuery),function(e,t){var n=e.app}(this,jQuery);